# Курсова робота з баз даних
## Магазин електронної комерції

Бекенд для онлайн магазину. Додаток дозволяє створювати замовлення, змінювати товари та отримувати аналітичні дані.

##### Виконав: Гамянін Іван, група ІМ-43

---

## Технологічний стек

- **Backend:** Node.js, Express.js
- **Database:** PostgreSQL 14
- **ORM:** Prisma Client
- **Containerization:** Docker & Docker Compose
- **Testing:** Jest, Supertest
- **Frontend:** HTML, CSS

---

## Інструкції з налаштування

1. Клонуйте репозиторій
2. Запустіть сервіси: `docker-compose up -d`
3. Встановіть пакети: `npm install`
4. Запустіть сервер: `npx nodemon src/index.js`

### Запуск тестів

Виконайте команду: `npm test`
Або: `npm test [Шлях до тесту]` для виконання конкретного тесту

---

## Структура проєкту

```
.
├── src/
│ ├── controllers/      # Обробка HTTP запитів
│ ├── services/         # Бізнес-логіка, робота з БД, SQL-запити
│ ├── routes/           # Маршрути API
│ ├── utils/            # Допоміжні функції (asyncHandler)
│ ├── app.js            # Express додаток
│ └── index.js          # Точка входу
├── prisma/
│ ├── schema.prisma     # Опис схеми БД
│ └─── migrations/       # Історія змін БД
├── public/             # Frontend (HTML/JS/CSS)
├── test/              # Інтеграційні тести
├── docs/               # Додаткова документація
└── docker-compose.yml
```

---

## Приклади використання API

### 1\. Товари

**Отримати список товарів (з фільтрацією за категорією та пагінацією):**
`GET /api/products?categoryId=1&page=1&limit=10`

**Оновити ціну товару:**
`PUT /api/products/5`

```json
{
  "price": 1299.50
}
```

### 2\. Оформлення замовлення

**Створити замовлення (Checkout):**
*Цей запит конвертує кошик користувача у замовлення, створює платіж та очищає кошик.*

`POST /api/checkout`

```json
{
  "customerId": 1,
  "paymentMethod": "Credit Card"
}
```

### 3\. Кошик

**Видалити товар з кошика:**
*Видаляє конкретний запис про товар у кошику (hard delete).*

`DELETE /api/cart-item/12`

### 4\. Аналітика

**Отримати звіт по доходах за категоріями:**
*Повертає статистику продажів та сумарний дохід для кожної категорії товарів.*

`GET /api/analytics/revenue`
